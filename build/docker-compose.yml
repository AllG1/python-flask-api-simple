name: python-flask-api-mockup
services:
  app:
    image: python-flask-api-mockup-container-img:$VERSION
    container_name: "python-flask-api-mockup-container"
    environment:
      - VERSION=$VERSION
      - APP_ENV_TYPE=test
    volumes:
      - /etc/hosts:/etc/hosts
    networks:
      - simple-python-flask-api-mockup-network
    ports:
      - "80:80"

  mysql:
    build:
      context: ..
      dockerfile: ./build/mysql.dockerfile
    container_name: "python-flask-api-mockup-mysql"
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: mydb
      MYSQL_USER: user
      MYSQL_PASSWORD: password
    # volumes:
    #   - ./mysql-data:/var/lib/mysql
    networks:
      - simple-python-flask-api-mockup-network

networks:
  simple-python-flask-api-mockup-network:
    driver: bridge
    ipam:
      config:
        - subnet: 172.20.0.0/16
